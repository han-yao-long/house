webpackJsonp([4],{"+2G7":function(t,e,i){t.exports=i.p+"static/img/海草新人@2x.e4a18b8.png"},"3HeD":function(t,e,i){"use strict";(function(t){var a=i("STpF"),s=i("ILyb"),o=i("t5DY"),r=i("X2Oc"),n=i("TuU3"),d=i("wSez");i.n(d);e.a={name:"index",components:{headgoapp:a.a},data:function(){return{modal:!1,codeText:"获取验证码",timer:null,codeImg:"",verifycodekey:"",phone:"",verifyCode:"",msCode:"",groupId:"",userId:"",invitationCode:"",countTime:"",normal:"1",groupDetail:{goodsImgUrl:"",groupAwardModel:{},aheadName:"",goodsPrice:"",userNum:null,joinNum:null,finishCount:"",failAt:"",failTimeNum:"",groupExplain:"",groupMemberWithdrawAmount:"",groupWithdrawAmount:"",groupSuperCardAmount:"",groupOrderStatus:"",members:[],token:""},share:{url:window.location.href,imgUrl:"http://"+window.location.hostname+"/h5/haicao_wx/dist/static/hpLogo.jpg",title:"1分换10元，提钱过大年",disc:"我刚提现，你还不快来？"},code:"",appId:""}},created:function(){t("title").html("拉新分享"),this.$store.getters.app.isIOS&&this.$toast({message:"IOS系统尚未开放，敬请期待",duration:3e4})},mounted:function(){this.initMsg()},methods:{getCodeImg:function(){var t=this;d.Indicator.open(),this.verifyCode="",this.verifyCodeKey="",Object(o.b)().then(function(e){t.codeImg="data:image/png;base64,"+e.data,t.verifycodekey=e.verifyCodeKey,d.Indicator.close()})},getCode:function(){var t=this;if(!/^[1][0-9]{10}$/.test(this.phone))return this.$toast({message:"请输入正确的手机号"}),!1;if(!this.verifyCode)return this.$toast({message:"请输入图片验证码"}),!1;if(!this.timer){var e=59,i={phone:this.phone,templateNum:1,verifyCode:this.verifyCode,verifyCodeKey:this.verifycodekey};d.Indicator.open(),Object(o.a)(i).then(function(i){"200"==i.code?(t.$toast({message:"发送成功"}),t.timer=setInterval(function(){e>0?(e--,t.codeText=e+"重新获取"):(t.codeText="获取验证码",clearInterval(t.timer),t.timer=null,e=null,t.getCodeImg())},1e3)):t.getCodeImg(),d.Indicator.close()})}},get_group_manages:function(){var e=this,a={recordId:this.groupId};d.Indicator.open(),Object(s.a)(a).then(function(a){if(e.groupDetail.goodsImgUrl=a.data.goodsImgUrl,e.groupDetail.aheadName=a.data.aheadName,e.groupDetail.goodsPrice=a.data.goodsPrice,e.groupDetail.finishCount=a.data.finishCount,e.groupDetail.groupAwardModel=a.data.groupAwardModel,e.groupDetail.userNum=a.data.userNum,e.groupDetail.joinNum=a.data.joinNum,e.groupDetail.groupMemberWithdrawAmount=a.data.groupMemberWithdrawAmount,e.groupDetail.groupWithdrawAmount=a.data.groupWithdrawAmount,e.groupDetail.groupSuperCardAmount=a.data.groupSuperCardAmount,e.groupDetail.groupExplain=a.data.groupExplain,e.groupDetail.groupOrderStatus=a.data.groupOrderStatus,e.groupDetail.failAt=a.data.failAt.slice(0,10),e.groupDetail.members=a.data.members,e.groupDetail.userNum-e.groupDetail.joinNum>0)for(var s=0;s<e.groupDetail.userNum-e.groupDetail.joinNum;s++)e.groupDetail.members.push({headPortrait:i("yde1")});var o=Number(a.data.failTimeNum);setInterval(function(){o>0?(e.countTime=o,e.groupDetail.failTimeNum=Object(r.c)(o--)):e.groupDetail.failTimeNum=0},1e3),e.$nextTick(function(){t(".rule-img").find("img").css({margin:"0 auto",width:"100%"})}),d.Indicator.close()})},shouModal:function(){this.$store.getters.app.isIOS?this.$toast({message:"IOS系统尚未开放，敬请期待"}):this.modal=!0},submit:function(){if(!/^[1][0-9]{10}$/.test(this.phone))return this.$toast({message:"请输入正确的手机号"}),!1;if(!this.verifyCode)return this.$toast({message:"请输入图片验证码"}),!1;if(!this.msCode)return this.$toast({message:"请输入短信验证码"}),!1;var t=this;this.wm&&this.wm.getToken("4a43a8671e50465f9bb495d860e01588",function(e){console.log("tokens",e),t.token=e,t.submitMsg(),t.modal=!1})},submitMsg:function(){var t=this;d.Indicator.open(),"undefined"==this.appId&&(this.appId="");var e={phone:this.phone,smscode:this.msCode,groupId:this.groupId,invitationCode:this.invitationCode,code:this.code,etoken:this.token,appId:this.appId};1==this.isNative?Object(s.b)(e).then(function(e){if(d.Indicator.close(),"200"!=e.code&&"9017035"!=e.code&&"9017033"!=e.code)t.getCodeImg(),t.msCode="";else{var i="";i=t.groupDetail.userNum-t.groupDetail.joinNum!="0"&&"3"!=t.groupDetail.groupOrderStatus?"0":"1";var a={groupId:t.groupId,path:"joinNew",data:e.data,share:t.share,isNew:i,countTime:t.countTime,img:t.$store.getters.app.imgIp+t.groupDetail.goodsImgUrl,groupMemberWithdrawAmount:t.groupDetail.groupMemberWithdrawAmount};t.$router.push({path:"hp_anther_isScuess",query:a})}}):Object(s.c)(e).then(function(e){if(d.Indicator.close(),"200"!=e.code&&"9017035"!=e.code&&"9017033"!=e.code)t.getCodeImg(),t.msCode="",t.codeText="获取验证码",clearInterval(t.timer),t.timer=null;else{var i="";i=t.groupDetail.userNum-t.groupDetail.joinNum!="0"&&"3"!=t.groupDetail.groupOrderStatus?"0":"1";var a={groupId:t.groupId,path:"joinNew",data:e.data,share:t.share,isNew:i,countTime:t.countTime,img:t.$store.getters.app.imgIp+t.groupDetail.goodsImgUrl,groupMemberWithdrawAmount:t.groupDetail.groupMemberWithdrawAmount};t.$router.push({path:"hp_anther_isScuess",query:a})}})},initMsg:function(){if(this.isNative=Object(r.f)().isNative,1==this.isNative)Object(r.f)().appId?this.appId=Object(r.f)().appId:this.appId=Object(r.a)(),this.groupId=Object(r.f)().groupId,this.userId=Object(r.f)().userId,this.invitationCode=Object(r.f)().invitationCode,this.getCodeImg(),this.get_group_manages(),this.init();else if(-1!=navigator.userAgent.toLowerCase().indexOf("micromessenger")){var t=Object(r.f)().code;if(t)this.code=t,d.Indicator.open({text:"加载中...",spinnerType:"fading-circle"}),this.groupId=n.a.get("groupId"),this.userId=n.a.get("userId"),this.invitationCode=n.a.get("invitationCode"),this.appId=n.a.get("appId"),this.getCodeImg(),this.get_group_manages(),this.init();else{if(n.a.set("groupId",Object(r.f)().groupId),n.a.set("userId",Object(r.f)().userId),n.a.set("invitationCode",Object(r.f)().invitationCode),Object(r.f)().appId)n.a.set("appId",Object(r.f)().appId);else{var e=Object(r.a)();n.a.set("appId",e)}Object(r.h)("/joinNew",Object(r.f)().appId)}}else d.MessageBox.alert("请在微信内打开","提示")},init:function(){this.wm=null;var t=this;initWatchman({productNumber:"YD00287362910423",onload:function(e){t.wm=e}})}},beforeDestroy:function(){t("title").html("海草公社")}}}).call(e,i("L7Pj"))},"93xf":function(t,e,i){t.exports=i.p+"static/img/joinNew.1f90cd2.png"},SoUt:function(t,e){},yjpz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("3HeD"),s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"join-container"},[a("headgoapp"),t._v(" "),a("div",{staticClass:"share-block"},[a("div",{staticClass:"share-content"},[t._m(0),t._v(" "),a("div",{staticClass:"right-content"},[a("div",{staticClass:"title"},[t._v("10元现金红包")]),t._v(" "),a("div",{staticClass:"scene"},[t._v("\n          累计发放\n          "),a("span",[t._v(t._s(t._f("volume")(t.groupDetail.groupAwardModel.withdrawAmount+t.groupDetail.groupAwardModel.cashAmount)))]),t._v("现金\n        ")]),t._v(" "),a("div",{staticClass:"receive"},[a("div",{staticClass:"receive-text"},[t._v("\n            已领\n            "),a("span",{staticClass:"red"},[t._v(t._s(t._f("volume")(t.groupDetail.groupAwardModel.receiveCount)))]),t._v("次\n          ")])])])]),t._v(" "),t.groupDetail.userNum-t.groupDetail.joinNum!="0"&&"3"!=t.groupDetail.groupOrderStatus?a("div",{staticClass:"group-list"},[a("div",{staticClass:"group-box"},t._l(t.groupDetail.members,function(e){return a("div",{key:e,staticClass:"group-item",style:{width:100/t.groupDetail.members.length+"%",maxWidth:"50%",minWidth:"20%"}},["0"==e.joinType?a("div",{staticClass:"group",style:{background:"url("+t.$store.getters.app.imgIp+e.headPortrait+") no-repeat",backgroundSize:"cover"}},[a("img",{staticClass:"tzImg",attrs:{src:i("F9Ha")}})]):t._e(),t._v(" "),"1"==e.joinType?a("img",{attrs:{src:t.$store.getters.app.imgIp+e.headPortrait}}):t._e(),t._v(" "),e.id?t._e():a("img",{attrs:{src:e.headPortrait}})])}),0)]):t._e(),t._v(" "),t.groupDetail.userNum-t.groupDetail.joinNum!="0"&&"3"!=t.groupDetail.groupOrderStatus?a("div",{staticClass:"residue-time"},[t._v("\n      还剩\n      "),a("span",{staticClass:"span-center"},[t._v(t._s(t.groupDetail.userNum-t.groupDetail.joinNum))]),t._v(" 个名额，\n      "),a("span",{staticClass:"span-right"},[t._v(t._s(t.groupDetail.failTimeNum))]),t._v(" 后结束\n    ")]):a("div",{staticClass:"fail-team"},[t.groupDetail.userNum-t.groupDetail.joinNum=="0"?a("div",{staticClass:"fail-title"},[a("img",{attrs:{src:i("vdCl")}}),t._v(" "),a("div",[t._v("团队已满员")])]):a("div",{staticClass:"fail-title"},[a("img",{attrs:{src:i("vdCl")}}),t._v(" "),a("div",[t._v("团队已失效")])]),t._v(" "),t._m(1)])]),t._v(" "),a("div",{staticClass:"share-rule"},[t._m(2),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"rule-list"},[a("div",{staticClass:"rule-img",domProps:{innerHTML:t._s(t.groupDetail.groupExplain)}})])]),t._v(" "),a("div",{staticClass:"btn-box"},[a("div",{staticClass:"submit",on:{click:t.shouModal}},[t._v("参团")])]),t._v(" "),t.modal?a("div",{staticClass:"modal",on:{click:function(e){t.modal=!t.modal}}}):t._e(),t._v(" "),t.modal?a("div",{staticClass:"form-box"},[a("div",{staticClass:"form-title"},[t._v("确认领取奖励")]),t._v(" "),a("div",{staticClass:"form-item item-top"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"phone",attrs:{maxlength:"11",placeholder:"请输入11位手机号码"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-item"},[a("div",{staticClass:"code-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyCode,expression:"verifyCode"}],staticClass:"code",attrs:{placeholder:"请输入验证码"},domProps:{value:t.verifyCode},on:{input:function(e){e.target.composing||(t.verifyCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"code-right"},[a("img",{staticClass:"code-img",attrs:{src:t.codeImg},on:{click:t.getCodeImg}})])]),t._v(" "),a("div",{staticClass:"form-item"},[a("div",{staticClass:"code-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.msCode,expression:"msCode"}],attrs:{placeholder:"请输入短信验证码"},domProps:{value:t.msCode},on:{input:function(e){e.target.composing||(t.msCode=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"code-right"},[a("div",{staticClass:"getCode-text",on:{click:t.getCode}},[t._v(t._s(t.codeText))])])]),t._v(" "),a("div",{staticClass:"form-item"},[a("div",{staticClass:"submit",on:{click:t.submit}},[t._v("参团")])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-box"},[e("img",{attrs:{src:i("93xf")}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fail-yz"},[e("div",[this._v("一键参团，会为您匹配更多")]),this._v(" "),e("div",[e("img",{attrs:{src:i("iRoP")}})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticClass:"line"}),this._v(" "),e("div",{staticClass:"center"},[this._v("拼团规则")]),this._v(" "),e("div",{staticClass:"line"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rule"},[a("div",{staticClass:"rule-item"},[a("img",{attrs:{src:i("+2G7")}}),t._v(" "),a("div",{staticClass:"rule-text"},[t._v("海草新人")])]),t._v(" "),a("div",{staticClass:"rule-item"},[a("img",{attrs:{src:i("CvOb")}}),t._v(" "),a("div",{staticClass:"rule-text"},[t._v("人满成团")])]),t._v(" "),a("div",{staticClass:"rule-item"},[a("img",{attrs:{src:i("BstQ")}}),t._v(" "),a("div",{staticClass:"rule-text"},[t._v("兑换10元")])])])}]};var o=function(t){i("SoUt")},r=i("C7Lr")(a.a,s,!1,o,"data-v-1e9b062c",null);e.default=r.exports}});
//# sourceMappingURL=4.fc9e82b30809861d104f.js.map